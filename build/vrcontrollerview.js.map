{"version":3,"file":"vrcontrollerview.js","sources":["../modules/loaders/daydream.js","../modules/animation.js","../modules/loaders/vive.js","../modules/loaders/rift.js","../modules/index.js"],"sourcesContent":["export function load( {\r\n  diffusePath,\r\n  modelPath,\r\n  color,\r\n  metalness,\r\n  roughness,\r\n  modelName } ){\r\n\r\n  const textureLoader = new THREE.TextureLoader();\r\n  const texture = textureLoader.load( diffusePath );\r\n  const loader = new THREE.JSONLoader();\r\n\r\n  return new Promise( function( resolve, reject ){\r\n\r\n    loader.load( modelData.modelPath, function( geometry ){\r\n      const mesh = new THREE.Mesh(\r\n\r\n        geometry,\r\n        new THREE.MeshStandardMaterial({\r\n\r\n          map: texture,\r\n          color: new THREE.Color().setStyle( color ),\r\n          metalness,\r\n          roughness\r\n        })\r\n\r\n      )\r\n      mesh.name = modelName;\r\n      resolve( mesh );\r\n    });\r\n\r\n  });\r\n\r\n}","export function mapRange(value, low1, high1, low2, high2) {\r\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\r\n}\r\n\r\nexport function bindAnimations( controller, bindings ){\r\n  Object.keys( bindings ).forEach( function( eventName ){\r\n    const bindingFn = bindings[ eventName ];\r\n    controller.addEventListener( eventName, bindingFn );\r\n  });\r\n}","import { mapRange, bindAnimations } from '../animation';\r\n\r\nexport function load( { modelPath, color, specular, shininess }, controller ){\r\n  let loader = new THREE.ColladaLoader();\r\n  loader.options.convertUpAxis = true;\r\n\r\n  return new Promise( function( resolve, reject ){\r\n    // console.log('wubalubadubdub')\r\n    loader.load( modelPath, function ( collada ) {\r\n\r\n      const dae = collada.scene;\r\n\r\n      //some collada import fixes\r\n      dae.scale.x = dae.scale.y = dae.scale.z = 1;\r\n      dae.rotation.y = Math.PI;\r\n\r\n      //hide scrolling wheel\r\n      dae.getObjectByName( 'trackpad_scroll_cut').visible = false;\r\n      //hide thumb cursos\r\n      dae.getObjectByName( 'trackpad_touch').visible = false;\r\n\r\n      dae.traverse ( function (child) {\r\n        if (child instanceof THREE.Mesh) {\r\n          child.castShadow = true;\r\n          child.material.color = new THREE.Color().setStyle( color );\r\n          child.material.specular = new THREE.Color().setStyle( specular );\r\n          child.material.shininess = shininess;\r\n          child.material.side = THREE.DoubleSide;\r\n        }\r\n      })\r\n\r\n      var rightLabel = dae.getObjectByName( 'rstatus').children[0];\r\n      var leftLabel = dae.getObjectByName( 'lstatus').children[0];\r\n\r\n      //this works only if when the page is loaded, both controllers are already on\r\n      const hand = controller.gamepad.hand;\r\n      if( hand == 'left') {\r\n\r\n        rightLabel.visible = false;\r\n        leftLabel.material.alphaMap = leftLabel.material.map;\r\n        leftLabel.material.transparent = true;\r\n\r\n      } else if( hand == 'right') {\r\n\r\n        leftLabel.visible = false;\r\n        rightLabel.material.alphaMap = rightLabel.material.map;\r\n        rightLabel.material.transparent = true;\r\n\r\n      } else {\r\n        leftLabel.visible = rightLabel.visible = false;\r\n      }\r\n\r\n      bindAnimations( controller, generateBindings( controller, dae ) );\r\n\r\n      resolve( dae );\r\n    });\r\n\r\n  });\r\n}\r\n\r\nconst TO_RADIANS = Math.PI / 180;\r\n\r\nfunction generateBindings( controller, model ){\r\n  const trackpad = controller.getButtonByName( 'trackpad' );\r\n\r\n  const trackpadTouch = model.getObjectByName( 'trackpad_touch' );\r\n  const trackpadPivot = model.getObjectByName( 'trackpad_pivot' );\r\n  const triggerPivot = model.getObjectByName( 'trigger_pivot' );\r\n  const lgripPivot = model.getObjectByName( 'lgrip_pivot' );\r\n  const rgripPivot = model.getObjectByName( 'rgrip_pivot' );\r\n  const menuButton = model.getObjectByName( 'button' );\r\n\r\n  return {\r\n    'trackpad touch began': function(){\r\n      trackpadTouch.visible = trackpad.isTouched;\r\n    },\r\n    'trackpad touch ended': function(){\r\n      trackpadTouch.visible = trackpad.isTouched;\r\n    },\r\n    'trackpad press ended': function(){\r\n      trackpadPivot.position.y = 0.002;\r\n      trackpadPivot.rotation.set( 0, 0, 0 );\r\n    },\r\n    'axes changed': function( { axes } ){\r\n\r\n      //0.019 / -0.019 are values specified in the SteamVR json file\r\n      const posX = mapRange(axes[ 0 ], -1, 1, 0.019, -0.019)\r\n      const posZ = mapRange(axes[ 1 ], -1, 1, -0.019, 0.019)\r\n\r\n      trackpadTouch.position.x = posX;\r\n      trackpadTouch.position.z = posZ;\r\n\r\n      if( trackpad.isPressed ){\r\n        // -7 / 7 and -4 / 4 are values specified in the SteamVR json file\r\n        const rotX = mapRange(axes[ 0 ], -1, 1, -7, 7);\r\n        const rotZ = mapRange(axes[ 1 ], -1, 1, -4, 4);\r\n\r\n        trackpadPivot.position.y = 0.001;\r\n        trackpadPivot.rotation.z = rotX * Math.PI / 180;\r\n        trackpadPivot.rotation.x = rotZ * Math.PI / 180;\r\n      }\r\n    },\r\n    'trigger value changed': function( { value } ){\r\n      const mapped = mapRange(value, 0, 1, 0, 17);\r\n      triggerPivot.rotation.x = mapped * TO_RADIANS;\r\n    },\r\n    'grips value changed': function( { value } ){\r\n      lgripPivot.rotation.y = - value * 2 * TO_RADIANS;\r\n      rgripPivot.rotation.y =  value * 2 * TO_RADIANS;\r\n    },\r\n    'menu value changed': function( { value } ){\r\n      const mapped = mapRange(value, 0, 1, 0, 0.00075);\r\n      menuButton.position.y = -mapped;\r\n    }\r\n  }\r\n}","export function load( {\r\n  modelLeftPath,\r\n  modelRightPath,\r\n  color,\r\n  specular,\r\n  shininess,\r\n  diffusePath,\r\n  specularPath }, controller ){\r\n\r\n  let loader = new THREE.ColladaLoader();\r\n  loader.options.convertUpAxis = true;\r\n\r\n  const hand = controller.gamepad.hand;\r\n\r\n  if( hand === undefined ){\r\n    return new Promise();\r\n  }\r\n\r\n\r\n  let modelPath;\r\n\r\n  if( hand == 'left') {\r\n    modelPath = modelLeftPath;\r\n  } else if ( hand == 'right') {\r\n    modelPath = modelRightPath;\r\n  }\r\n\r\n  if( modelPath ){\r\n\r\n    return new Promise( function( resolve, reject ){\r\n      loader.load( modelPath, function ( collada ) {\r\n\r\n        const dae = collada.scene;\r\n\r\n        //some collada fixes\r\n        dae.scale.x = dae.scale.y = dae.scale.z = 1;\r\n        dae.rotation.y = Math.PI;\r\n        dae.rotation.x = 50.6 * Math.PI / 180;\r\n\r\n        dae.position.copy( new THREE.Vector3(0.0055,0.04, -0.03) );\r\n\r\n        let textureLoader = new THREE.TextureLoader();\r\n\r\n        dae.traverse ( function (child) {\r\n          if (child instanceof THREE.Mesh) {\r\n            child.castShadow = true;\r\n            child.material.color = new THREE.Color().setStyle( color );\r\n            child.material.specular = new THREE.Color().setStyle( specular );\r\n            child.material.shininess = shininess;\r\n            child.material.side = THREE.DoubleSide;\r\n            child.material.map = textureLoader.load( diffusePath );\r\n            child.material.specularMap = textureLoader.load( specularPath );\r\n          }\r\n        });\r\n\r\n        resolve( dae );\r\n\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n}","import ModelData from '../models/modeldata.json'\r\nimport * as DaydreamController from './loaders/daydream';\r\nimport * as ViveController from './loaders/vive';\r\nimport * as RiftController from './loaders/rift';\r\n\r\nexport default function( camera, controls ){\r\n  const handler = initialize( camera, controls );\r\n  window.addEventListener( 'vr controller connected', handler );\r\n}\r\n\r\nfunction initialize( camera, controls ){\r\n\r\n  return function( event ){\r\n\r\n    const controller = event.detail;\r\n\r\n    controller.standingMatrix = controls.getStandingMatrix()\r\n    controller.head = camera\r\n\r\n    function addToParent( model ){\r\n      controller.add( model );\r\n      window.dispatchEvent( new CustomEvent( 'vr controller view loaded', { detail: model }))\r\n    }\r\n\r\n\r\n    const { gamepadStyle } = controller;\r\n\r\n    switch( gamepadStyle ){\r\n      case 'daydream':\r\n        DaydreamController.load( ModelData[ gamepadStyle ], controller )\r\n        .then( addToParent );\r\n        break;\r\n      case 'vive':\r\n        ViveController.load( ModelData[ gamepadStyle ], controller )\r\n        .then( addToParent );\r\n        break;\r\n      case 'rift':\r\n        //  rift needs handedness info\r\n        RiftController.load( ModelData[ gamepadStyle ], controller )\r\n        .then( addToParent );\r\n        break;\r\n    }\r\n\r\n    //  If the controller dissappers we should too.\r\n    //  We could probably do something more efficient than simply set it to invisible\r\n    //  but this is just for illustration purposes, right? ;)\r\n\r\n    controller.addEventListener( 'disconnected', function(){\r\n      controller.visible = false;\r\n    });\r\n\r\n  }\r\n}"],"names":["load","diffusePath","modelPath","color","metalness","roughness","modelName","textureLoader","THREE","TextureLoader","texture","loader","JSONLoader","Promise","resolve","reject","modelData","geometry","mesh","Mesh","MeshStandardMaterial","Color","setStyle","name","mapRange","value","low1","high1","low2","high2","bindAnimations","controller","bindings","keys","forEach","eventName","bindingFn","addEventListener","specular","shininess","ColladaLoader","options","convertUpAxis","collada","dae","scene","scale","x","y","z","rotation","Math","PI","getObjectByName","visible","traverse","child","castShadow","material","side","DoubleSide","rightLabel","children","leftLabel","hand","gamepad","alphaMap","map","transparent","generateBindings","TO_RADIANS","model","trackpad","getButtonByName","trackpadTouch","trackpadPivot","triggerPivot","lgripPivot","rgripPivot","menuButton","isTouched","position","set","axes","posX","posZ","isPressed","rotX","rotZ","mapped","modelLeftPath","modelRightPath","specularPath","undefined","copy","Vector3","specularMap","camera","controls","handler","initialize","event","detail","standingMatrix","getStandingMatrix","head","addToParent","add","dispatchEvent","CustomEvent","gamepadStyle","ModelData","then"],"mappings":"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"}